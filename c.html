<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz C</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíª</text></svg>"
    />
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      @keyframes shake {
        10%, 90% { transform: translate3d(-1px, 0, 0); }
        20%, 80% { transform: translate3d(2px, 0, 0); }
        30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
        40%, 60% { transform: translate3d(4px, 0, 0); }
      }
      .shake {
        animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-8">
    <div class="container mx-auto px-4 max-w-4xl">
      <!-- Header -->
      <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-indigo-800 mb-2">Quiz C üíª</h1>
        <p class="text-lg text-gray-600">Testez vos connaissances en C</p>
      </div>

      <!-- Quiz Container -->
      <div id="quiz-container" class="bg-white rounded-xl shadow-lg p-6 mb-6">
        <!-- Progress Bar -->
        <div class="mb-6">
          <div class="flex justify-between mb-2">
            <span class="text-sm font-medium text-indigo-700">Progression</span>
            <span
              id="progress-text"
              class="text-sm font-medium text-indigo-700"
            ></span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              id="progress-bar"
              class="bg-indigo-600 h-2.5 rounded-full"
              style="width: 20%"
            ></div>
          </div>
        </div>

        <!-- Question Container -->
        <div id="question-container" class="mb-8">
          <!-- Question will be dynamically inserted here -->
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between">
          <button
            id="prev-btn"
            class="flex items-center justify-center px-5 py-2 text-sm text-indigo-700 transition-colors duration-150 bg-indigo-100 rounded-lg hover:bg-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <i class="fas fa-arrow-left mr-2"></i> Pr√©c√©dent
          </button>
          <button
            id="next-btn"
            class="flex items-center justify-center px-5 py-2 text-sm text-white transition-colors duration-150 bg-indigo-600 rounded-lg hover:bg-indigo-700"
          >
            Suivant <i class="fas fa-arrow-right ml-2"></i>
          </button>
          <button
            id="results-btn"
            class="hidden flex items-center justify-center px-5 py-2 text-sm text-white transition-colors duration-150 bg-green-600 rounded-lg hover:bg-green-700"
          >
            Voir les r√©sultats <i class="fas fa-chart-bar ml-2"></i>
          </button>
        </div>
      </div>

      <!-- Results Container -->
      <div
        id="results-container"
        class="hidden bg-white rounded-xl shadow-lg p-6"
      >
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-indigo-800 mb-2">
            R√©sultats du Quiz
          </h2>
          <div
            class="inline-flex items-center px-4 py-2 bg-indigo-100 text-indigo-800 rounded-full"
          >
            <i class="fas fa-trophy mr-2"></i>
            <span id="score-text" class="font-bold"
              >Score: 0/quizQuestions.length</span
            >
          </div>
        </div>

        <div id="results-list" class="space-y-4">
          <!-- Results will be dynamically inserted here -->
        </div>

        <div class="mt-8 text-center">
          <button
            id="restart-btn"
            class="px-6 py-3 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-150"
          >
            <i class="fas fa-redo mr-2"></i> Recommencer le Quiz
          </button>
          <button
            id="download-pdf-btn"
            class="px-6 py-3 text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors duration-150 ml-4"
          >
            <i class="fas fa-download mr-2"></i> T√©l√©charger en PDF
          </button>
        </div>

        <div class="mt-8 text-center">
          <a
            href="index.html"
            class="px-6 py-3 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-150"
          >
            <i class="fas fa-redo mr-2"></i>Revenir √† la page principale
          </a>
        </div>
      </div>
    </div>

    <script>
      localStorage.clear();
      // Quiz questions data
      const quizQuestions = [
    {
        "id": 1,
        "type": "multichoix",
        "question": "Quel est le type de retour de la fonction main() en C?",
        "options": [
            "void",
            "int",
            "char",
            "float"
        ],
        "correctAnswer": 1,
        "explanation": "La fonction main() retourne g√©n√©ralement un int (0 pour succ√®s, autre valeur pour erreur)."
    },
    {
        "id": 2,
        "type": "multichoix",
        "question": "Quel op√©rateur est utilis√© pour obtenir l'adresse d'une variable?",
        "options": [
            "*",
            "&",
            "->",
            "."
        ],
        "correctAnswer": 1,
        "explanation": "L'op√©rateur & donne l'adresse m√©moire d'une variable."
    },
    {
        "id": 3,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on un pointeur vers un entier?",
        "options": [
            "int ptr;",
            "int *ptr;",
            "pointer int ptr;",
            "int &ptr;"
        ],
        "correctAnswer": 1,
        "explanation": "int *ptr; d√©clare un pointeur vers un entier."
    },
    {
        "id": 4,
        "type": "multichoix",
        "question": "Quelle fonction permet d'allouer de la m√©moire dynamiquement?",
        "options": [
            "malloc()",
            "alloc()",
            "new()",
            "create()"
        ],
        "correctAnswer": 0,
        "explanation": "malloc() alloue de la m√©moire dans le tas (heap)."
    },
    {
        "id": 5,
        "type": "multichoix",
        "question": "Comment lib√®re-t-on la m√©moire allou√©e avec malloc()?",
        "options": [
            "free()",
            "release()",
            "delete",
            "dealloc()"
        ],
        "correctAnswer": 0,
        "explanation": "free() lib√®re la m√©moire pr√©c√©demment allou√©e avec malloc(), calloc() ou realloc()."
    },
    {
        "id": 6,
        "type": "multichoix",
        "question": "Quel op√©rateur permet d'acc√©der √† la valeur point√©e par un pointeur?",
        "options": [
            "&",
            "*",
            "->",
            "."
        ],
        "correctAnswer": 1,
        "explanation": "L'op√©rateur * (d√©r√©f√©rencement) donne acc√®s √† la valeur point√©e par un pointeur."
    },
    {
        "id": 7,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on un tableau de 10 entiers?",
        "options": [
            "int array[10];",
            "array int[10];",
            "int array = [10];",
            "int[10] array;"
        ],
        "correctAnswer": 0,
        "explanation": "int array[10]; d√©clare un tableau de 10 entiers."
    },
    {
        "id": 8,
        "type": "multichoix",
        "question": "Quelle est la valeur d'index du premier √©l√©ment d'un tableau?",
        "options": [
            "0",
            "1",
            "-1",
            "first"
        ],
        "correctAnswer": 0,
        "explanation": "En C, les indices de tableau commencent √† 0."
    },
    {
        "id": 9,
        "type": "multichoix",
        "question": "Quelle fonction permet d'afficher du texte √† l'√©cran?",
        "options": [
            "printf()",
            "print()",
            "echo()",
            "display()"
        ],
        "correctAnswer": 0,
        "explanation": "printf() est la fonction standard pour afficher du texte format√©."
    },
    {
        "id": 10,
        "type": "multichoix",
        "question": "Quel en-t√™te faut-il inclure pour utiliser printf()?",
        "options": [
            "<stdio.h>",
            "<stdlib.h>",
            "<math.h>",
            "<string.h>"
        ],
        "correctAnswer": 0,
        "explanation": "stdio.h contient les d√©clarations des fonctions d'entr√©e/sortie standard."
    },
    {
        "id": 11,
        "type": "multichoix",
        "question": "Comment repr√©sente-t-on la fin d'une cha√Æne de caract√®res?",
        "options": [
            "'\\0'",
            "'\\n'",
            "'end'",
            "'stop'"
        ],
        "correctAnswer": 0,
        "explanation": "Le caract√®re nul '\\0' marque la fin d'une cha√Æne en C."
    },
    {
        "id": 12,
        "type": "multichoix",
        "question": "Quelle fonction permet de copier une cha√Æne?",
        "options": [
            "strcpy()",
            "strcopy()",
            "copy()",
            "stringcpy()"
        ],
        "correctAnswer": 0,
        "explanation": "strcpy() copie une cha√Æne source vers une cha√Æne destination."
    },
    {
        "id": 13,
        "type": "multichoix",
        "question": "Comment compare-t-on deux cha√Ænes?",
        "options": [
            "strcmp()",
            "strcompare()",
            "compare()",
            "stringcmp()"
        ],
        "correctAnswer": 0,
        "explanation": "strcmp() compare deux cha√Ænes et retourne 0 si elles sont √©gales."
    },
    {
        "id": 14,
        "type": "multichoix",
        "question": "Quelle fonction donne la longueur d'une cha√Æne?",
        "options": [
            "strlen()",
            "strlength()",
            "length()",
            "size()"
        ],
        "correctAnswer": 0,
        "explanation": "strlen() retourne le nombre de caract√®res avant le '\\0'."
    },
    {
        "id": 15,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on une structure?",
        "options": [
            "struct Nom { ... };",
            "structure Nom { ... };",
            "class Nom { ... };",
            "type struct Nom { ... };"
        ],
        "correctAnswer": 0,
        "explanation": "Le mot-cl√© struct est utilis√© pour d√©finir une structure."
    },
    {
        "id": 16,
        "type": "multichoix",
        "question": "Quel op√©rateur permet d'acc√©der aux membres d'une structure?",
        "options": [
            ".",
            "->",
            "*",
            "&"
        ],
        "correctAnswer": 0,
        "explanation": "L'op√©rateur . est utilis√© pour acc√©der aux membres d'une variable structure."
    },
    {
        "id": 17,
        "type": "multichoix",
        "question": "Quel op√©rateur permet d'acc√©der aux membres d'une structure via un pointeur?",
        "options": [
            ".",
            "->",
            "*",
            "&"
        ],
        "correctAnswer": 1,
        "explanation": "L'op√©rateur -> est utilis√© pour acc√©der aux membres d'une structure via un pointeur."
    },
    {
        "id": 18,
        "type": "multichoix",
        "question": "Quel type de variable ne peut pas √™tre modifi√©?",
        "options": [
            "const",
            "static",
            "volatile",
            "extern"
        ],
        "correctAnswer": 0,
        "explanation": "const indique que la variable est constante et ne peut √™tre modifi√©e."
    },
    {
        "id": 19,
        "type": "multichoix",
        "question": "Quel mot-cl√© permet de cr√©er un type √©num√©r√©?",
        "options": [
            "enum",
            "typedef",
            "struct",
            "union"
        ],
        "correctAnswer": 0,
        "explanation": "enum permet de d√©finir un type √©num√©r√© avec des constantes nomm√©es."
    },
    {
        "id": 20,
        "type": "multichoix",
        "question": "Comment cr√©e-t-on un alias de type?",
        "options": [
            "typedef",
            "alias",
            "define",
            "type"
        ],
        "correctAnswer": 0,
        "explanation": "typedef permet de cr√©er un alias pour un type existant."
    },
    {
        "id": 21,
        "type": "multichoix",
        "question": "Quelle directive du pr√©processeur permet d'inclure un fichier?",
        "options": [
            "#include",
            "#define",
            "#ifdef",
            "#pragma"
        ],
        "correctAnswer": 0,
        "explanation": "#include ins√®re le contenu d'un fichier d'en-t√™te."
    },
    {
        "id": 22,
        "type": "multichoix",
        "question": "Comment d√©finit-on une macro?",
        "options": [
            "#define",
            "#macro",
            "#def",
            "#constant"
        ],
        "correctAnswer": 0,
        "explanation": "#define permet de d√©finir des macros et constantes."
    },
    {
        "id": 23,
        "type": "multichoix",
        "question": "Quelle fonction lit un caract√®re depuis l'entr√©e standard?",
        "options": [
            "getchar()",
            "read()",
            "getc()",
            "scanf()"
        ],
        "correctAnswer": 0,
        "explanation": "getchar() lit un caract√®re depuis stdin."
    },
    {
        "id": 24,
        "type": "multichoix",
        "question": "Comment formate-t-on la lecture avec scanf()?",
        "options": [
            "scanf(\"%d\", &variable);",
            "scanf(\"d\", variable);",
            "scanf(variable, \"%d\");",
            "scanf(&variable, \"%d\");"
        ],
        "correctAnswer": 0,
        "explanation": "scanf() utilise une cha√Æne de format et les adresses des variables."
    },
    {
        "id": 25,
        "type": "multichoix",
        "question": "Quel est le type d'un tableau lorsqu'il est pass√© en param√®tre?",
        "options": [
            "Un pointeur vers le premier √©l√©ment",
            "Une copie du tableau",
            "Le tableau complet",
            "Une r√©f√©rence"
        ],
        "correctAnswer": 0,
        "explanation": "Quand on passe un tableau √† une fonction, c'est en r√©alit√© un pointeur vers le premier √©l√©ment qui est pass√©."
    },
    {
        "id": 26,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on un pointeur de fonction?",
        "options": [
            "int (*ptr)(int, int);",
            "int *ptr(int, int);",
            "int ptr(int, int)*;",
            "function int *ptr(int, int);"
        ],
        "correctAnswer": 0,
        "explanation": "La syntaxe est: type_retour (*nom_pointeur)(param√®tres);"
    },
    {
        "id": 27,
        "type": "multichoix",
        "question": "Quelle fonction alloue et initialise la m√©moire √† z√©ro?",
        "options": [
            "malloc()",
            "calloc()",
            "realloc()",
            "alloc()"
        ],
        "correctAnswer": 1,
        "explanation": "calloc() alloue et initialise tous les octets √† z√©ro."
    },
    {
        "id": 28,
        "type": "multichoix",
        "question": "Comment redimensionne-t-on un bloc m√©moire?",
        "options": [
            "malloc()",
            "calloc()",
            "realloc()",
            "resize()"
        ],
        "correctAnswer": 2,
        "explanation": "realloc() change la taille d'un bloc m√©moire pr√©c√©demment allou√©."
    },
    {
        "id": 29,
        "type": "multichoix",
        "question": "Quel mot-cl√© permet de partager la m√©moire entre variables?",
        "options": [
            "union",
            "struct",
            "enum",
            "typedef"
        ],
        "correctAnswer": 0,
        "explanation": "Une union permet √† diff√©rentes variables de partager le m√™me espace m√©moire."
    },
    {
        "id": 30,
        "type": "multichoix",
        "question": "Quelle est la diff√©rence entre ++i et i++?",
        "options": [
            "Aucune diff√©rence",
            "++i incr√©mente avant d'utiliser, i++ apr√®s",
            "i++ est plus rapide",
            "++i ne fonctionne qu'avec les entiers"
        ],
        "correctAnswer": 1,
        "explanation": "++i (pr√©-incr√©ment) incr√©mente puis utilise la valeur, i++ (post-incr√©ment) utilise puis incr√©mente."
    },
    {
        "id": 31,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on une constante enti√®re?",
        "options": [
            "const int MAX = 100;",
            "#define MAX 100",
            "Les deux m√©thodes",
            "Aucune des deux"
        ],
        "correctAnswer": 2,
        "explanation": "On peut utiliser const ou #define pour d√©finir des constantes."
    },
    {
        "id": 32,
        "type": "multichoix",
        "question": "Quel op√©rateur donne la taille d'un type ou variable?",
        "options": [
            "sizeof",
            "size",
            "length",
            "measure"
        ],
        "correctAnswer": 0,
        "explanation": "sizeof retourne la taille en octets d'un type ou variable."
    },
    {
        "id": 33,
        "type": "multichoix",
        "question": "Comment √©crit-on un commentaire sur une ligne?",
        "options": [
            "// commentaire",
            "/* commentaire */",
            "-- commentaire",
            "# commentaire"
        ],
        "correctAnswer": 0,
        "explanation": "// pour les commentaires sur une ligne (C99), /* */ pour les commentaires multi-lignes."
    },
    {
        "id": 34,
        "type": "multichoix",
        "question": "Quelle boucle est garantie de s'ex√©cuter au moins une fois?",
        "options": [
            "for",
            "while",
            "do-while",
            "if"
        ],
        "correctAnswer": 2,
        "explanation": "La boucle do-while teste la condition apr√®s l'ex√©cution du bloc."
    },
    {
        "id": 35,
        "type": "multichoix",
        "question": "Comment sort-on pr√©matur√©ment d'une boucle?",
        "options": [
            "break",
            "continue",
            "return",
            "exit"
        ],
        "correctAnswer": 0,
        "explanation": "break sort de la boucle, continue passe √† l'it√©ration suivante."
    },
    {
        "id": 36,
        "type": "multichoix",
        "question": "Quelle instruction permet de sauter √† une √©tiquette?",
        "options": [
            "goto",
            "jump",
            "break",
            "continue"
        ],
        "correctAnswer": 0,
        "explanation": "goto permet de sauter √† une √©tiquette dans la m√™me fonction (√† utiliser avec prudence)."
    },
    {
        "id": 37,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on un tableau √† deux dimensions?",
        "options": [
            "int matrix[3][3];",
            "int[3][3] matrix;",
            "int matrix(3,3);",
            "array int matrix[3][3];"
        ],
        "correctAnswer": 0,
        "explanation": "int matrix[3][3]; d√©clare un tableau 3x3 d'entiers."
    },
    {
        "id": 38,
        "type": "multichoix",
        "question": "Quelle fonction permet de comparer deux blocs m√©moire?",
        "options": [
            "strcmp()",
            "memcmp()",
            "compare()",
            "bcmp()"
        ],
        "correctAnswer": 1,
        "explanation": "memcmp() compare deux blocs m√©moire octet par octet."
    },
    {
        "id": 39,
        "type": "multichoix",
        "question": "Comment copie-t-on un bloc m√©moire?",
        "options": [
            "strcpy()",
            "memcpy()",
            "copy()",
            "bcopy()"
        ],
        "correctAnswer": 1,
        "explanation": "memcpy() copie un bloc m√©moire vers un autre."
    },
    {
        "id": 40,
        "type": "multichoix",
        "question": "Quelle fonction remplit un bloc m√©moire avec une valeur?",
        "options": [
            "memset()",
            "memfill()",
            "fill()",
            "setmem()"
        ],
        "correctAnswer": 0,
        "explanation": "memset() remplit un bloc m√©moire avec une valeur sp√©cifi√©e."
    },
    {
        "id": 41,
        "type": "multichoix",
        "question": "Quel en-t√™te contient les fonctions math√©matiques?",
        "options": [
            "<math.h>",
            "<stdlib.h>",
            "<stdio.h>",
            "<ctype.h>"
        ],
        "correctAnswer": 0,
        "explanation": "math.h contient les d√©clarations des fonctions math√©matiques comme sin(), cos(), sqrt(), etc."
    },
    {
        "id": 42,
        "type": "multichoix",
        "question": "Comment convertit-on une cha√Æne en entier?",
        "options": [
            "atoi()",
            "itoa()",
            "strtoint()",
            "parseint()"
        ],
        "correctAnswer": 0,
        "explanation": "atoi() convertit une cha√Æne en entier (ASCII to Integer)."
    },
    {
        "id": 43,
        "type": "multichoix",
        "question": "Comment convertit-on un entier en cha√Æne?",
        "options": [
            "itoa()",
            "atoi()",
            "strtoi()",
            "inttostr()"
        ],
        "correctAnswer": 0,
        "explanation": "itoa() convertit un entier en cha√Æne (non standard mais commune)."
    },
    {
        "id": 44,
        "type": "multichoix",
        "question": "Quelle fonction donne la valeur absolue?",
        "options": [
            "abs()",
            "fabs()",
            "absolute()",
            "Les deux premi√®res r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "abs() pour les entiers, fabs() pour les flottants."
    },
    {
        "id": 45,
        "type": "multichoix",
        "question": "Comment g√©n√®re-t-on un nombre al√©atoire?",
        "options": [
            "rand()",
            "random()",
            "rnd()",
            "aleatoire()"
        ],
        "correctAnswer": 0,
        "explanation": "rand() g√©n√®re un nombre pseudo-al√©atoire."
    },
    {
        "id": 46,
        "type": "multichoix",
        "question": "Comment initialise-t-on le g√©n√©rateur de nombres al√©atoires?",
        "options": [
            "srand()",
            "initrand()",
            "randomize()",
            "seed()"
        ],
        "correctAnswer": 0,
        "explanation": "srand() initialise le g√©n√©rateur avec une graine."
    },
    {
        "id": 47,
        "type": "multichoix",
        "question": "Quel type utilise-t-on pour les caract√®res?",
        "options": [
            "char",
            "string",
            "character",
            "byte"
        ],
        "correctAnswer": 0,
        "explanation": "char est le type pour les caract√®res (g√©n√©ralement 1 octet)."
    },
    {
        "id": 48,
        "type": "multichoix",
        "question": "Comment v√©rifie-t-on si un caract√®re est une lettre?",
        "options": [
            "isalpha()",
            "isletter()",
            "ischar()",
            "isalnum()"
        ],
        "correctAnswer": 0,
        "explanation": "isalpha() v√©rifie si un caract√®re est une lettre."
    },
    {
        "id": 49,
        "type": "multichoix",
        "question": "Quelle fonction met un caract√®re en majuscule?",
        "options": [
            "toupper()",
            "touppercase()",
            "upper()",
            "capitalize()"
        ],
        "correctAnswer": 0,
        "explanation": "toupper() convertit un caract√®re en majuscule."
    },
    {
        "id": 50,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on un pointeur constant?",
        "options": [
            "const int *ptr;",
            "int const *ptr;",
            "int * const ptr;",
            "Les trois r√©ponses"
        ],
        "correctAnswer": 2,
        "explanation": "int * const ptr; - le pointeur est constant (ne peut pointer ailleurs), mais la valeur point√©e peut changer."
    },
    {
        "id": 51,
        "type": "multichoix",
        "question": "Qu'est-ce qu'un pointeur nul?",
        "options": [
            "NULL",
            "0",
            "void*",
            "Les deux premi√®res r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "NULL est g√©n√©ralement d√©fini comme 0 ou (void*)0."
    },
    {
        "id": 52,
        "type": "multichoix",
        "question": "Comment v√©rifie-t-on l'√©chec de malloc()?",
        "options": [
            "if (ptr == NULL)",
            "if (ptr == 0)",
            "if (!ptr)",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "Toutes ces m√©thodes v√©rifient si l'allocation a √©chou√©."
    },
    {
        "id": 53,
        "type": "multichoix",
        "question": "Quelle est la taille d'un int en g√©n√©ral?",
        "options": [
            "4 octets",
            "2 octets",
            "8 octets",
            "D√©pend de l'architecture"
        ],
        "correctAnswer": 3,
        "explanation": "La taille des types d√©pend de l'architecture et du compilateur."
    },
    {
        "id": 54,
        "type": "multichoix",
        "question": "Comment √©crit-on un litt√©ral de type long?",
        "options": [
            "123L",
            "123l",
            "123long",
            "Les deux premi√®res r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "On utilise L ou l apr√®s le nombre pour un litt√©ral long."
    },
    {
        "id": 55,
        "type": "multichoix",
        "question": "Quel format utilise-t-on pour printf() avec un float?",
        "options": [
            "%f",
            "%d",
            "%s",
            "%c"
        ],
        "correctAnswer": 0,
        "explanation": "%f pour les float, %lf pour les double."
    },
    {
        "id": 56,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on un tableau de pointeurs?",
        "options": [
            "int *arr[10];",
            "int (*arr)[10];",
            "int arr*[10];",
            "pointer int arr[10];"
        ],
        "correctAnswer": 0,
        "explanation": "int *arr[10]; d√©clare un tableau de 10 pointeurs vers int."
    },
    {
        "id": 57,
        "type": "multichoix",
        "question": "Qu'est-ce que l'arithm√©tique des pointeurs?",
        "options": [
            "Addition/soustraction d'entiers √† des pointeurs",
            "Multiplication de pointeurs",
            "Division de pointeurs",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 0,
        "explanation": "On peut ajouter/soustraire des entiers √† des pointeurs, mais pas les multiplier/diviser."
    },
    {
        "id": 58,
        "type": "multichoix",
        "question": "Que fait p++ si p est un pointeur vers int?",
        "options": [
            "Ajoute 1 √† la valeur point√©e",
            "Avance de sizeof(int) octets",
            "Recule de sizeof(int) octets",
            "Ajoute 1 √† l'adresse"
        ],
        "correctAnswer": 1,
        "explanation": "p++ avance le pointeur de la taille du type point√© (sizeof(int))."
    },
    {
        "id": 59,
        "type": "multichoix",
        "question": "Comment d√©clare-t-on une fonction qui ne prend pas de param√®tres?",
        "options": [
            "void func();",
            "void func(void);",
            "Les deux m√©thodes",
            "Aucune des deux"
        ],
        "correctAnswer": 1,
        "explanation": "void func(void); d√©clare explicitement une fonction sans param√®tres."
    },
    {
        "id": 60,
        "type": "multichoix",
        "question": "Quel mot-cl√© permet de retourner plusieurs valeurs d'une fonction?",
        "options": [
            "struct",
            "return",
            "void",
            "Aucun - impossible directement"
        ],
        "correctAnswer": 3,
        "explanation": "On ne peut retourner qu'une seule valeur directement, mais on peut utiliser des pointeurs en param√®tres ou une structure."
    }
];

      document.getElementById("progress-text").textContent =
        "Question 1/" + quizQuestions.length;

      // DOM Elements
      const questionContainer = document.getElementById("question-container");
      const progressBar = document.getElementById("progress-bar");
      const progressText = document.getElementById("progress-text");
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");
      const resultsBtn = document.getElementById("results-btn");
      const quizContainer = document.getElementById("quiz-container");
      const resultsContainer = document.getElementById("results-container");
      const scoreText = document.getElementById("score-text");
      const resultsList = document.getElementById("results-list");
      const restartBtn = document.getElementById("restart-btn");
      const downloadPdfBtn = document.getElementById("download-pdf-btn");

      // Quiz state
      let currentQuestionIndex = 0;
      let userAnswers =
        JSON.parse(localStorage.getItem("cQuizAnswers")) ||
        Array(quizQuestions.length).fill(null);

      // Initialize the quiz
      function initQuiz() {
        displayQuestion(currentQuestionIndex);
        updateProgress();
        updateNavigationButtons();
      }

      // Display current question
      function displayQuestion(index) {
        const question = quizQuestions[index];
        let questionHTML = "";

        if (question.type === "vrai-faux") {
          questionHTML = `
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">${
                          question.question
                        }</h3>
                        <div class="flex space-x-4">
                            <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-150 flex-1 ${
                              userAnswers[index] === "vrai"
                                ? "border-indigo-500 bg-indigo-50"
                                : ""
                            }">
                                <input type="radio" name="answer" value="vrai" class="hidden" ${
                                  userAnswers[index] === "vrai" ? "checked" : ""
                                }>
                                <div class="flex items-center justify-center w-6 h-6 border-2 border-gray-300 rounded-full mr-3 ${
                                  userAnswers[index] === "vrai"
                                    ? "border-indigo-500 bg-indigo-500"
                                    : ""
                                }">
                                    ${
                                      userAnswers[index] === "vrai"
                                        ? '<i class="fas fa-check text-white text-xs"></i>'
                                        : ""
                                    }
                                </div>
                                <span class="text-lg">Vrai</span>
                            </label>
                            <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-150 flex-1 ${
                              userAnswers[index] === "faux"
                                ? "border-indigo-500 bg-indigo-50"
                                : ""
                            }">
                                <input type="radio" name="answer" value="faux" class="hidden" ${
                                  userAnswers[index] === "faux" ? "checked" : ""
                                }>
                                <div class="flex items-center justify-center w-6 h-6 border-2 border-gray-300 rounded-full mr-3 ${
                                  userAnswers[index] === "faux"
                                    ? "border-indigo-500 bg-indigo-500"
                                    : ""
                                }">
                                    ${
                                      userAnswers[index] === "faux"
                                        ? '<i class="fas fa-check text-white text-xs"></i>'
                                        : ""
                                    }
                                </div>
                                <span class="text-lg">Faux</span>
                            </label>
                        </div>
                    </div>
                `;
        } else if (question.type === "multichoix") {
          questionHTML = `
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">${
                          question.question
                        }</h3>
                        <div class="space-y-3">
                            ${question.options
                              .map(
                                (option, i) => `
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-150 ${
                                  userAnswers[index] === i
                                    ? "border-indigo-500 bg-indigo-50"
                                    : ""
                                }">
                                    <input type="radio" name="answer" value="${i}" class="hidden" ${
                                  userAnswers[index] === i ? "checked" : ""
                                }>
                                    <div class="flex items-center justify-center w-6 h-6 border-2 border-gray-300 rounded-full mr-3 ${
                                      userAnswers[index] === i
                                        ? "border-indigo-500 bg-indigo-500"
                                        : ""
                                    }">
                                        ${
                                          userAnswers[index] === i
                                            ? '<i class="fas fa-check text-white text-xs"></i>'
                                            : ""
                                        }
                                    </div>
                                    <span class="text-lg">${option}</span>
                                </label>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        }

        questionContainer.innerHTML = questionHTML;

        // Add event listeners to answer options
        const answerOptions = questionContainer.querySelectorAll("label");
        answerOptions.forEach((option) => {
          option.addEventListener("click", () => {
            // Remove selection from all options
            answerOptions.forEach((opt) => {
              opt.classList.remove("border-indigo-500", "bg-indigo-50");
              const radio = opt.querySelector('input[type="radio"]');
              const checkIcon = opt.querySelector(".fa-check");
              if (checkIcon) {
                checkIcon.parentElement.classList.remove(
                  "border-indigo-500",
                  "bg-indigo-500"
                );
                checkIcon.remove();
              }
            });

            // Select clicked option
            option.classList.add("border-indigo-500", "bg-indigo-50");
            const radio = option.querySelector('input[type="radio"]');
            radio.checked = true;

            const checkDiv = option.querySelector("div");
            checkDiv.classList.add("border-indigo-500", "bg-indigo-500");
            checkDiv.innerHTML =
              '<i class="fas fa-check text-white text-xs"></i>';

            // Save answer
            saveAnswer(index, radio.value);
          });
        });
      }

      // Save answer to localStorage
      function saveAnswer(index, answer) {
        userAnswers[index] = answer;
        localStorage.setItem("cQuizAnswers", JSON.stringify(userAnswers));
        updateNavigationButtons();
      }

      // Update progress bar and text
      function updateProgress() {
        const progress =
          ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
        progressBar.style.width = `${progress}%`;
        progressText.textContent = `Question ${currentQuestionIndex + 1}/${
          quizQuestions.length
        }`;
      }

      // Update navigation buttons state
      function updateNavigationButtons() {
        prevBtn.disabled = currentQuestionIndex === 0;

        if (currentQuestionIndex === quizQuestions.length - 1) {
          nextBtn.classList.add("hidden");
          resultsBtn.classList.remove("hidden");
        } else {
          nextBtn.classList.remove("hidden");
          resultsBtn.classList.add("hidden");
        }
      }

      // Show results
      function showResults() {
        let score = 0;
        resultsList.innerHTML = "";

        quizQuestions.forEach((question, index) => {
          const userAnswer = userAnswers[index];
          let isCorrect = false;

          if (question.type === "vrai-faux") {
            isCorrect = userAnswer === question.correctAnswer;
          } else if (question.type === "multichoix") {
            isCorrect = parseInt(userAnswer) === question.correctAnswer;
          }

          if (isCorrect) score++;

          const resultItem = document.createElement("div");
          resultItem.className = `p-4 rounded-lg border ${
            isCorrect
              ? "bg-green-50 border-green-200"
              : "bg-red-50 border-red-200"
          }`;

          let userAnswerText = "";
          if (question.type === "vrai-faux") {
            userAnswerText = userAnswer || "Non r√©pondu";
          } else if (question.type === "multichoix") {
            userAnswerText =
              userAnswer !== null
                ? question.options[userAnswer]
                : "Non r√©pondu";
          }

          resultItem.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0 mt-1 mr-3">
                            <i class="fas ${
                              isCorrect
                                ? "fa-check-circle text-green-500"
                                : "fa-times-circle text-red-500"
                            }"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${
                              question.question
                            }</h4>
                            <div class="mt-2 grid grid-cols-1 md:grid-cols-2 gap-2">
                                <div class="${
                                  isCorrect ? "text-green-700" : "text-red-700"
                                }">
                                    <span class="font-medium">Votre r√©ponse:</span> ${
                                      !userAnswerText
                                        ? "vous n'avez pas r√©pondu"
                                        : userAnswerText
                                    }
                                </div>
                                ${
                                  !isCorrect
                                    ? `
                                    <div class="text-green-700">
                                        <span class="font-medium">Bonne r√©ponse:</span> 
                                        ${
                                          question.type === "vrai-faux"
                                            ? question.correctAnswer
                                            : question.options[
                                                question.correctAnswer
                                              ]
                                        }
                                    </div>
                                `
                                    : ""
                                }
                            </div>
                            <div class="mt-2 text-gray-600 text-sm">
                                <i class="fas fa-info-circle mr-1"></i> ${
                                  question.explanation
                                }
                            </div>
                        </div>
                    </div>
                `;

          resultsList.appendChild(resultItem);
        });

        scoreText.textContent = `Score: ${score}/${quizQuestions.length}`;
        quizContainer.classList.add("hidden");
        resultsContainer.classList.remove("hidden");

        const scorePercentage = (score / quizQuestions.length) * 100;

        if (scorePercentage >= 50) {
          // Celebration effect
          confetti({
            particleCount: 200,
            spread: 100,
            origin: { y: 0.6 },
          });
        } else {
          // Failure effect
          resultsContainer.classList.add("shake");
        }
      }

      // Event Listeners
      prevBtn.addEventListener("click", () => {
        if (currentQuestionIndex > 0) {
          currentQuestionIndex--;
          displayQuestion(currentQuestionIndex);
          updateProgress();
          updateNavigationButtons();
        }
      });

      nextBtn.addEventListener("click", () => {
        if (currentQuestionIndex < quizQuestions.length - 1) {
          currentQuestionIndex++;
          displayQuestion(currentQuestionIndex);
          updateProgress();
          updateNavigationButtons();
        }
      });

      resultsBtn.addEventListener("click", showResults);

      restartBtn.addEventListener("click", () => {
        // Clear saved answers
        localStorage.removeItem("cQuizAnswers");
        userAnswers = Array(quizQuestions.length).fill(null);
        currentQuestionIndex = 0;

        // Reset UI
        resultsContainer.classList.add("hidden");
        quizContainer.classList.remove("hidden");
        resultsContainer.classList.remove("shake"); // Remove shake effect on restart

        // Reinitialize quiz
        initQuiz();
      });

      downloadPdfBtn.addEventListener("click", () => {
        const { jsPDF } = window.jspdf;
        const resultsToCapture = document.getElementById("results-container");

        // Temporarily show the container to capture it, if it's hidden
        const wasHidden = resultsToCapture.classList.contains("hidden");
        if (wasHidden) {
          resultsToCapture.classList.remove("hidden");
        }

        html2canvas(resultsToCapture).then((canvas) => {
          if (wasHidden) {
            resultsToCapture.classList.add("hidden");
          }
          const imgData = canvas.toDataURL("image/png");
          const pdf = new jsPDF("p", "mm", "a4");
          const pdfWidth = pdf.internal.pageSize.getWidth();
          const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
          pdf.addImage(imgData, "PNG", 0, 0, pdfWidth, pdfHeight);
          pdf.save("quiz-c-results.pdf");
        });
      });
      // Initialize the quiz
      initQuiz();
    </script>
  </body>
</html>
