<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz sql</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üóÑÔ∏è</text></svg>"
    />
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      @keyframes shake {
        10%, 90% { transform: translate3d(-1px, 0, 0); }
        20%, 80% { transform: translate3d(2px, 0, 0); }
        30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
        40%, 60% { transform: translate3d(4px, 0, 0); }
      }
      .shake {
        animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
      }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-8">
    <div class="container mx-auto px-4 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-indigo-800 mb-2">Quiz Sql üóÑÔ∏è</h1>
            <p class="text-lg text-gray-600">Testez vos connaissances en Sql</p>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <!-- Progress Bar -->
            <div class="mb-6">
                <div class="flex justify-between mb-2">
                    <span class="text-sm font-medium text-indigo-700">Progression</span>
                    <span id="progress-text" class="text-sm font-medium text-indigo-700">Question 1/5</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full" style="width: 20%"></div>
                </div>
            </div>

            <!-- Question Container -->
            <div id="question-container" class="mb-8">
                <!-- Question will be dynamically inserted here -->
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between">
                <button id="prev-btn" class="flex items-center justify-center px-5 py-2 text-sm text-indigo-700 transition-colors duration-150 bg-indigo-100 rounded-lg hover:bg-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fas fa-arrow-left mr-2"></i> Pr√©c√©dent
                </button>
                <button id="next-btn" class="flex items-center justify-center px-5 py-2 text-sm text-white transition-colors duration-150 bg-indigo-600 rounded-lg hover:bg-indigo-700">
                    Suivant <i class="fas fa-arrow-right ml-2"></i>
                </button>
                <button id="results-btn" class="hidden flex items-center justify-center px-5 py-2 text-sm text-white transition-colors duration-150 bg-green-600 rounded-lg hover:bg-green-700">
                    Voir les r√©sultats <i class="fas fa-chart-bar ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Results Container -->
        <div id="results-container" class="hidden bg-white rounded-xl shadow-lg p-6">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-indigo-800 mb-2">R√©sultats du Quiz</h2>
                <div class="inline-flex items-center px-4 py-2 bg-indigo-100 text-indigo-800 rounded-full">
                    <i class="fas fa-trophy mr-2"></i>
                    <span id="score-text" class="font-bold">Score: 0/5</span>
                </div>
            </div>
            
            <div id="results-list" class="space-y-4">
                <!-- Results will be dynamically inserted here -->
            </div>
            
            <div class="mt-8 text-center">
                <button id="restart-btn" class="px-6 py-3 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-150">
                    <i class="fas fa-redo mr-2"></i>Recommencer le Quiz
                </button>
                <button
                  id="download-pdf-btn"
                  class="px-6 py-3 text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors duration-150 ml-4"
                >
                  <i class="fas fa-download mr-2"></i> T√©l√©charger en PDF
                </button>
            </div>

            <div class="mt-8 text-center">
                <a href="index.html" class="px-6 py-3 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-150">
                    <i class="fas fa-redo mr-2"></i>Revenir √† la page principale
                </a>
            </div>
        </div>
    </div>

    <script>
        localStorage.clear();
        // Quiz questions data
        const quizQuestions = [
    {
        "id": 1,
        "type": "multichoix",
        "question": "Que signifie l'acronyme SQL?",
        "options": [
            "Structured Query Language",
            "Simple Query Language",
            "Standard Query Logic",
            "System Query Language"
        ],
        "correctAnswer": 0,
        "explanation": "SQL signifie Structured Query Language (Langage de Requ√™te Structur√©)."
    },
    {
        "id": 2,
        "type": "multichoix",
        "question": "Quelle commande SQL permet de r√©cup√©rer des donn√©es?",
        "options": [
            "GET",
            "SELECT",
            "FETCH",
            "RETRIEVE"
        ],
        "correctAnswer": 1,
        "explanation": "SELECT est utilis√©e pour interroger et r√©cup√©rer des donn√©es depuis une base."
    },
    {
        "id": 3,
        "type": "multichoix",
        "question": "Comment s√©lectionne-t-on toutes les colonnes d'une table?",
        "options": [
            "SELECT *",
            "SELECT ALL",
            "SELECT COLUMNS",
            "SELECT ."
        ],
        "correctAnswer": 0,
        "explanation": "SELECT * s√©lectionne toutes les colonnes de la table sp√©cifi√©e."
    },
    {
        "id": 4,
        "type": "multichoix",
        "question": "Quelle clause permet de filtrer les r√©sultats?",
        "options": [
            "FILTER BY",
            "WHERE",
            "HAVING",
            "CONDITION"
        ],
        "correctAnswer": 1,
        "explanation": "WHERE permet de filtrer les lignes selon une condition."
    },
    {
        "id": 5,
        "type": "multichoix",
        "question": "Comment trie-t-on les r√©sultats par ordre croissant?",
        "options": [
            "SORT BY",
            "ORDER BY",
            "ASC BY",
            "Les deux premi√®res r√©ponses"
        ],
        "correctAnswer": 1,
        "explanation": "ORDER BY colonne ASC (croissant) ou DESC (d√©croissant)."
    },
    {
        "id": 6,
        "type": "multichoix",
        "question": "Quel op√©rateur permet de v√©rifier si une valeur est dans une liste?",
        "options": [
            "IN",
            "BETWEEN",
            "EXISTS",
            "CONTAINS"
        ],
        "correctAnswer": 0,
        "explanation": "IN v√©rifie si une valeur est pr√©sente dans une liste de valeurs."
    },
    {
        "id": 7,
        "type": "multichoix",
        "question": "Comment v√©rifie-t-on les valeurs NULL?",
        "options": [
            "= NULL",
            "IS NULL",
            "== NULL",
            "NULL()"
        ],
        "correctAnswer": 1,
        "explanation": "IS NULL v√©rifie si une valeur est NULL, IS NOT NULL pour l'inverse."
    },
    {
        "id": 8,
        "type": "multichoix",
        "question": "Quelle fonction agr√®ge des valeurs en une seule?",
        "options": [
            "COUNT",
            "SUM",
            "AVG",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "COUNT, SUM, AVG, MAX, MIN sont des fonctions d'agr√©gation."
    },
    {
        "id": 9,
        "type": "multichoix",
        "question": "Comment compte-t-on le nombre de lignes?",
        "options": [
            "TOTAL()",
            "COUNT(*)",
            "SUM()",
            "ROWS()"
        ],
        "correctAnswer": 1,
        "explanation": "COUNT(*) retourne le nombre total de lignes dans le r√©sultat."
    },
    {
        "id": 10,
        "type": "multichoix",
        "question": "Quelle clause permet de grouper des lignes?",
        "options": [
            "GROUP BY",
            "PARTITION BY",
            "CLUSTER BY",
            "CATEGORIZE BY"
        ],
        "correctAnswer": 0,
        "explanation": "GROUP BY regroupe les lignes ayant les m√™mes valeurs."
    },
    {
        "id": 11,
        "type": "multichoix",
        "question": "Quelle clause filtre les groupes?",
        "options": [
            "WHERE",
            "HAVING",
            "FILTER",
            "GROUP WHERE"
        ],
        "correctAnswer": 1,
        "explanation": "HAVING filtre les groupes cr√©√©s par GROUP BY, WHERE filtre les lignes individuelles."
    },
    {
        "id": 12,
        "type": "multichoix",
        "question": "Comment joint-on deux tables?",
        "options": [
            "JOIN",
            "MERGE",
            "COMBINE",
            "UNITE"
        ],
        "correctAnswer": 0,
        "explanation": "JOIN permet de combiner des lignes de deux tables ou plus."
    },
    {
        "id": 13,
        "type": "multichoix",
        "question": "Quel type de JOIN retourne toutes les lignes des deux tables?",
        "options": [
            "INNER JOIN",
            "LEFT JOIN",
            "FULL OUTER JOIN",
            "CROSS JOIN"
        ],
        "correctAnswer": 2,
        "explanation": "FULL OUTER JOIN retourne toutes les lignes des deux tables."
    },
    {
        "id": 14,
        "type": "multichoix",
        "question": "Quel JOIN retourne seulement les correspondances?",
        "options": [
            "INNER JOIN",
            "LEFT JOIN",
            "RIGHT JOIN",
            "FULL JOIN"
        ],
        "correctAnswer": 0,
        "explanation": "INNER JOIN retourne seulement les lignes avec correspondance dans les deux tables."
    },
    {
        "id": 15,
        "type": "multichoix",
        "question": "Comment ins√®re-t-on de nouvelles donn√©es?",
        "options": [
            "ADD",
            "INSERT",
            "CREATE",
            "NEW"
        ],
        "correctAnswer": 1,
        "explanation": "INSERT INTO table (colonnes) VALUES (valeurs) ajoute de nouvelles lignes."
    },
    {
        "id": 16,
        "type": "multichoix",
        "question": "Comment modifie-t-on des donn√©es existantes?",
        "options": [
            "MODIFY",
            "UPDATE",
            "ALTER",
            "CHANGE"
        ],
        "correctAnswer": 1,
        "explanation": "UPDATE table SET colonne = valeur WHERE condition modifie des donn√©es."
    },
    {
        "id": 17,
        "type": "multichoix",
        "question": "Comment supprime-t-on des donn√©es?",
        "options": [
            "REMOVE",
            "DELETE",
            "DROP",
            "ERASE"
        ],
        "correctAnswer": 1,
        "explanation": "DELETE FROM table WHERE condition supprime des lignes."
    },
    {
        "id": 18,
        "type": "multichoix",
        "question": "Comment cr√©e-t-on une nouvelle table?",
        "options": [
            "NEW TABLE",
            "CREATE TABLE",
            "ADD TABLE",
            "MAKE TABLE"
        ],
        "correctAnswer": 1,
        "explanation": "CREATE TABLE nom (colonne1 type, colonne2 type, ...) cr√©e une table."
    },
    {
        "id": 19,
        "type": "multichoix",
        "question": "Comment supprime-t-on une table?",
        "options": [
            "DELETE TABLE",
            "DROP TABLE",
            "REMOVE TABLE",
            "ERASE TABLE"
        ],
        "correctAnswer": 1,
        "explanation": "DROP TABLE nom supprime d√©finitivement une table et ses donn√©es."
    },
    {
        "id": 20,
        "type": "multichoix",
        "question": "Quel mot-cl√© garantit l'unicit√© des valeurs?",
        "options": [
            "UNIQUE",
            "DISTINCT",
            "PRIMARY",
            "Les deux premi√®res r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "UNIQUE comme contrainte, DISTINCT dans SELECT pour √©liminer les doublons."
    },
    {
        "id": 21,
        "type": "multichoix",
        "question": "Qu'est-ce qu'une cl√© primaire?",
        "options": [
            "Une colonne qui identifie uniquement chaque ligne",
            "La premi√®re colonne de la table",
            "Une colonne obligatoire",
            "Une colonne index√©e"
        ],
        "correctAnswer": 0,
        "explanation": "Une cl√© primaire identifie de mani√®re unique chaque enregistrement (NOT NULL + UNIQUE)."
    },
    {
        "id": 22,
        "type": "multichoix",
        "question": "Qu'est-ce qu'une cl√© √©trang√®re?",
        "options": [
            "Une cl√© qui r√©f√©rence une cl√© primaire d'une autre table",
            "Une cl√© non utilis√©e",
            "Une cl√© temporaire",
            "Une cl√© crypt√©e"
        ],
        "correctAnswer": 0,
        "explanation": "Une cl√© √©trang√®re √©tablit une relation entre deux tables."
    },
    {
        "id": 23,
        "type": "multichoix",
        "question": "Comment ajoute-t-on une contrainte NOT NULL?",
        "options": [
            "ADD NOT NULL",
            "SET NOT NULL",
            "ALTER COLUMN SET NOT NULL",
            "MODIFY NOT NULL"
        ],
        "correctAnswer": 2,
        "explanation": "ALTER TABLE table ALTER COLUMN colonne SET NOT NULL (syntaxe peut varier)."
    },
    {
        "id": 24,
        "type": "multichoix",
        "question": "Quelle commande modifie la structure d'une table?",
        "options": [
            "UPDATE",
            "MODIFY",
            "ALTER",
            "CHANGE"
        ],
        "correctAnswer": 2,
        "explanation": "ALTER TABLE permet d'ajouter, supprimer ou modifier des colonnes."
    },
    {
        "id": 25,
        "type": "multichoix",
        "question": "Comment ajoute-t-on une colonne √† une table existante?",
        "options": [
            "ADD COLUMN",
            "INSERT COLUMN",
            "NEW COLUMN",
            "CREATE COLUMN"
        ],
        "correctAnswer": 0,
        "explanation": "ALTER TABLE table ADD COLUMN nom type; ajoute une nouvelle colonne."
    },
    {
        "id": 26,
        "type": "multichoix",
        "question": "Quelle fonction retourne la longueur d'une cha√Æne?",
        "options": [
            "LEN()",
            "LENGTH()",
            "SIZE()",
            "CHAR_LENGTH()"
        ],
        "correctAnswer": 1,
        "explanation": "LENGTH() retourne le nombre de caract√®res d'une cha√Æne (syntaxe peut varier)."
    },
    {
        "id": 27,
        "type": "multichoix",
        "question": "Comment convertit-on un texte en majuscules?",
        "options": [
            "UPPER()",
            "TO_UPPER()",
            "CAPITALIZE()",
            "UCASE()"
        ],
        "correctAnswer": 0,
        "explanation": "UPPER(cha√Æne) convertit une cha√Æne en majuscules."
    },
    {
        "id": 28,
        "type": "multichoix",
        "question": "Comment extrait-on une partie d'une cha√Æne?",
        "options": [
            "SUBSTRING()",
            "EXTRACT()",
            "SLICE()",
            "PART()"
        ],
        "correctAnswer": 0,
        "explanation": "SUBSTRING(cha√Æne FROM d√©but FOR longueur) extrait une sous-cha√Æne."
    },
    {
        "id": 29,
        "type": "multichoix",
        "question": "Quelle fonction retourne la date courante?",
        "options": [
            "NOW()",
            "CURRENT_DATE()",
            "TODAY()",
            "GETDATE()"
        ],
        "correctAnswer": 0,
        "explanation": "NOW() retourne la date et heure courantes (syntaxe peut varier)."
    },
    {
        "id": 30,
        "type": "multichoix",
        "question": "Comment formate-t-on une date?",
        "options": [
            "FORMAT_DATE()",
            "TO_CHAR()",
            "DATE_FORMAT()",
            "Les r√©ponses varient selon le SGBD"
        ],
        "correctAnswer": 3,
        "explanation": "La fonction de formatage de date varie: DATE_FORMAT() MySQL, TO_CHAR() Oracle/PostgreSQL, etc."
    },
    {
        "id": 31,
        "type": "multichoix",
        "question": "Quel op√©rateur utilise-t-on pour les recherches de texte?",
        "options": [
            "MATCH",
            "CONTAINS",
            "LIKE",
            "SEARCH"
        ],
        "correctAnswer": 2,
        "explanation": "LIKE permet des recherches avec des motifs (% pour plusieurs caract√®res, _ pour un seul)."
    },
    {
        "id": 32,
        "type": "multichoix",
        "question": "Comment combine-t-on les r√©sultats de deux SELECT?",
        "options": [
            "MERGE",
            "UNION",
            "COMBINE",
            "JOIN"
        ],
        "correctAnswer": 1,
        "explanation": "UNION combine les r√©sultats de deux requ√™tes (√©limine les doublons)."
    },
    {
        "id": 33,
        "type": "multichoix",
        "question": "Quelle vue syst√®me contient les informations sur les tables?",
        "options": [
            "SYS_TABLES",
            "INFORMATION_SCHEMA",
            "DATABASE_CATALOG",
            "TABLE_INFO"
        ],
        "correctAnswer": 1,
        "explanation": "INFORMATION_SCHEMA contient les m√©tadonn√©es de la base de donn√©es."
    },
    {
        "id": 34,
        "type": "multichoix",
        "question": "Comment cr√©e-t-on une vue?",
        "options": [
            "NEW VIEW",
            "CREATE VIEW",
            "DEFINE VIEW",
            "MAKE VIEW"
        ],
        "correctAnswer": 1,
        "explanation": "CREATE VIEW nom AS SELECT ... cr√©e une vue (requ√™te stock√©e)."
    },
    {
        "id": 35,
        "type": "multichoix",
        "question": "Qu'est-ce qu'une transaction?",
        "options": [
            "Une s√©rie d'op√©rations atomiques",
            "Un type de table",
            "Une jointure complexe",
            "Une sauvegarde"
        ],
        "correctAnswer": 0,
        "explanation": "Une transaction est une unit√© de travail qui doit √™tre ex√©cut√©e compl√®tement ou pas du tout."
    },
    {
        "id": 36,
        "type": "multichoix",
        "question": "Comment commence-t-on une transaction?",
        "options": [
            "START TRANSACTION",
            "BEGIN TRANSACTION",
            "BEGIN",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "La syntaxe varie: START TRANSACTION, BEGIN, BEGIN TRANSACTION selon le SGBD."
    },
    {
        "id": 37,
        "type": "multichoix",
        "question": "Comment valide-t-on une transaction?",
        "options": [
            "COMMIT",
            "VALIDATE",
            "CONFIRM",
            "ACCEPT"
        ],
        "correctAnswer": 0,
        "explanation": "COMMIT valide d√©finitivement les modifications d'une transaction."
    },
    {
        "id": 38,
        "type": "multichoix",
        "question": "Comment annule-t-on une transaction?",
        "options": [
            "CANCEL",
            "ROLLBACK",
            "UNDO",
            "ABORT"
        ],
        "correctAnswer": 1,
        "explanation": "ROLLBACK annule toutes les op√©rations de la transaction courante."
    },
    {
        "id": 39,
        "type": "multichoix",
        "question": "Qu'est-ce qu'un index?",
        "options": [
            "Une structure qui acc√©l√®re les recherches",
            "Une table de correspondance",
            "Une cl√© primaire",
            "Une vue mat√©rialis√©e"
        ],
        "correctAnswer": 0,
        "explanation": "Un index am√©liore les performances des requ√™tes de recherche."
    },
    {
        "id": 40,
        "type": "multichoix",
        "question": "Comment cr√©e-t-on un index?",
        "options": [
            "ADD INDEX",
            "CREATE INDEX",
            "MAKE INDEX",
            "NEW INDEX"
        ],
        "correctAnswer": 1,
        "explanation": "CREATE INDEX nom_index ON table (colonne) cr√©e un index."
    },
    {
        "id": 41,
        "type": "multichoix",
        "question": "Quelle commande permet de sauvegarder une base?",
        "options": [
            "BACKUP",
            "EXPORT",
            "SAVE",
            "La commande varie selon le SGBD"
        ],
        "correctAnswer": 3,
        "explanation": "La commande de sauvegarde varie: BACKUP DATABASE SQL Server, pg_dump PostgreSQL, mysqldump MySQL, etc."
    },
    {
        "id": 42,
        "type": "multichoix",
        "question": "Comment limite-t-on le nombre de r√©sultats?",
        "options": [
            "LIMIT",
            "TOP",
            "ROWNUM",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "LIMIT MySQL/PostgreSQL, TOP SQL Server, ROWNUM Oracle."
    },
    {
        "id": 43,
        "type": "multichoix",
        "question": "Qu'est-ce qu'une sous-requ√™te?",
        "options": [
            "Une requ√™te dans une autre requ√™te",
            "Une requ√™te simple",
            "Une requ√™te de sauvegarde",
            "Une requ√™te syst√®me"
        ],
        "correctAnswer": 0,
        "explanation": "Une sous-requ√™te (subquery) est une requ√™te imbriqu√©e dans une autre."
    },
    {
        "id": 44,
        "type": "multichoix",
        "question": "Quel op√©rateur existe-t-il pour les sous-requ√™tes?",
        "options": [
            "EXISTS",
            "IN",
            "ANY/ALL",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "EXISTS, IN, ANY, ALL sont des op√©rateurs utilisables avec les sous-requ√™tes."
    },
    {
        "id": 45,
        "type": "multichoix",
        "question": "Qu'est-ce qu'une jointure naturelle?",
        "options": [
            "NATURAL JOIN",
            "Une jointure implicite sur les colonnes de m√™me nom",
            "Une jointure sans condition ON",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "NATURAL JOIN joint automatiquement sur les colonnes de m√™me nom."
    },
    {
        "id": 46,
        "type": "multichoix",
        "question": "Comment cr√©e-t-on un utilisateur?",
        "options": [
            "ADD USER",
            "CREATE USER",
            "NEW USER",
            "MAKE USER"
        ],
        "correctAnswer": 1,
        "explanation": "CREATE USER nom IDENTIFIED BY 'motdepasse' cr√©e un nouvel utilisateur."
    },
    {
        "id": 47,
        "type": "multichoix",
        "question": "Comment accorde-t-on des privil√®ges?",
        "options": [
            "ALLOW",
            "GRANT",
            "PERMIT",
            "AUTHORIZE"
        ],
        "correctAnswer": 1,
        "explanation": "GRANT privil√®ge ON table TO utilisateur accorde des permissions."
    },
    {
        "id": 48,
        "type": "multichoix",
        "question": "Comment r√©voque-t-on des privil√®ges?",
        "options": [
            "REMOVE",
            "REVOKE",
            "DENY",
            "BLOCK"
        ],
        "correctAnswer": 1,
        "explanation": "REVOKE privil√®ge ON table FROM utilisateur retire des permissions."
    },
    {
        "id": 49,
        "type": "multichoix",
        "question": "Qu'est-ce qu'un trigger?",
        "options": [
            "Un d√©clencheur ex√©cut√© automatiquement",
            "Un type d'index",
            "Une contrainte",
            "Une vue"
        ],
        "correctAnswer": 0,
        "explanation": "Un trigger est une proc√©dure stock√©e ex√©cut√©e automatiquement lors d'√©v√©nements."
    },
    {
        "id": 50,
        "type": "multichoix",
        "question": "Comment cr√©e-t-on une proc√©dure stock√©e?",
        "options": [
            "CREATE PROCEDURE",
            "CREATE FUNCTION",
            "MAKE PROCEDURE",
            "Les deux premi√®res r√©ponses"
        ],
        "explanation": "CREATE PROCEDURE pour les proc√©dures, CREATE FUNCTION pour les fonctions."
    },
    {
        "id": 51,
        "type": "multichoix",
        "question": "Quel type de jointure produit un produit cart√©sien?",
        "options": [
            "CROSS JOIN",
            "INNER JOIN",
            "NATURAL JOIN",
            "SELF JOIN"
        ],
        "correctAnswer": 0,
        "explanation": "CROSS JOIN retourne toutes les combinaisons possibles des lignes des deux tables."
    },
    {
        "id": 52,
        "type": "multichoix",
        "question": "Comment fait-on une jointure sur la m√™me table?",
        "options": [
            "SELF JOIN",
            "SAME JOIN",
            "AUTO JOIN",
            "IDENTICAL JOIN"
        ],
        "correctAnswer": 0,
        "explanation": "SELF JOIN permet de joindre une table avec elle-m√™me."
    },
    {
        "id": 53,
        "type": "multichoix",
        "question": "Quelle fonction arrondit un nombre?",
        "options": [
            "ROUND()",
            "TRUNCATE()",
            "FLOOR()",
            "Toutes ces r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "ROUND() arrondit, TRUNCATE() tronque, FLOOR() arrondit √† l'entier inf√©rieur."
    },
    {
        "id": 54,
        "type": "multichoix",
        "question": "Comment calcule-t-on la diff√©rence entre deux dates?",
        "options": [
            "DATEDIFF()",
            "DATE_SUB()",
            "INTERVAL",
            "La fonction varie selon le SGBD"
        ],
        "correctAnswer": 3,
        "explanation": "DATEDIFF() SQL Server/MySQL, DATE_PART() PostgreSQL, etc."
    },
    {
        "id": 55,
        "type": "multichoix",
        "question": "Qu'est-ce que la normalisation?",
        "options": [
            "Organiser les donn√©es pour r√©duire la redondance",
            "Convertir les donn√©es en minuscules",
            "Standardiser les formats de donn√©es",
            "Optimiser les performances"
        ],
        "correctAnswer": 0,
        "explanation": "La normalisation organise les tables pour √©liminer la redondance et les anomalies."
    },
    {
        "id": 56,
        "type": "multichoix",
        "question": "Quelle forme normale √©limine les d√©pendances partielles?",
        "options": [
            "1NF",
            "2NF",
            "3NF",
            "BCNF"
        ],
        "correctAnswer": 1,
        "explanation": "La 2NF √©limine les d√©pendances partielles (tout attribut non cl√© d√©pend de toute la cl√©)."
    },
    {
        "id": 57,
        "type": "multichoix",
        "question": "Quel op√©rateur combine les conditions?",
        "options": [
            "AND/OR",
            "&&/||",
            "+/-",
            "Les deux premi√®res r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "AND/OR en SQL standard, &&/|| dans certains SGBD."
    },
    {
        "id": 58,
        "type": "multichoix",
        "question": "Comment v√©rifie-t-on un intervalle de valeurs?",
        "options": [
            "RANGE",
            "BETWEEN",
            "INTERVAL",
            "IN"
        ],
        "correctAnswer": 1,
        "explanation": "BETWEEN valeur1 AND valeur2 v√©rifie un intervalle inclusif."
    },
    {
        "id": 59,
        "type": "multichoix",
        "question": "Quelle clause permet de renommer les colonnes?",
        "options": [
            "RENAME",
            "AS",
            "ALIAS",
            "Les deux derni√®res r√©ponses"
        ],
        "correctAnswer": 3,
        "explanation": "AS permet de donner un alias √† une colonne ou table."
    },
    {
        "id": 60,
        "type": "multichoix",
        "question": "Qu'est-ce qu'un SGBD?",
        "options": [
            "Syst√®me de Gestion de Base de Donn√©es",
            "Software for Database Management",
            "Structured Database Manager",
            "Simple Database Module"
        ],
        "correctAnswer": 0,
        "explanation": "SGBD signifie Syst√®me de Gestion de Base de Donn√©es (DBMS en anglais)."
    }
];

                document.getElementById("progress-text").textContent = "Question 1/"+quizQuestions.length;

        // DOM Elements
        const questionContainer = document.getElementById('question-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resultsBtn = document.getElementById('results-btn');
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const scoreText = document.getElementById('score-text');
        const resultsList = document.getElementById('results-list');
        const restartBtn = document.getElementById('restart-btn');
        const downloadPdfBtn = document.getElementById("download-pdf-btn");

        // Quiz state
        let currentQuestionIndex = 0;
        let userAnswers = JSON.parse(localStorage.getItem('javaQuizAnswers')) || Array(quizQuestions.length).fill(null);

        // Initialize the quiz
        function initQuiz() {
            displayQuestion(currentQuestionIndex);
            updateProgress();
            updateNavigationButtons();
        }

        // Display current question
        function displayQuestion(index) {
            const question = quizQuestions[index];
            let questionHTML = '';

            if (question.type === 'vrai-faux') {
                questionHTML = `
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">${question.question}</h3>
                        <div class="flex space-x-4">
                            <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-150 flex-1 ${userAnswers[index] === 'vrai' ? 'border-indigo-500 bg-indigo-50' : ''}">
                                <input type="radio" name="answer" value="vrai" class="hidden" ${userAnswers[index] === 'vrai' ? 'checked' : ''}>
                                <div class="flex items-center justify-center w-6 h-6 border-2 border-gray-300 rounded-full mr-3 ${userAnswers[index] === 'vrai' ? 'border-indigo-500 bg-indigo-500' : ''}">
                                    ${userAnswers[index] === 'vrai' ? '<i class="fas fa-check text-white text-xs"></i>' : ''}
                                </div>
                                <span class="text-lg">Vrai</span>
                            </label>
                            <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-150 flex-1 ${userAnswers[index] === 'faux' ? 'border-indigo-500 bg-indigo-50' : ''}">
                                <input type="radio" name="answer" value="faux" class="hidden" ${userAnswers[index] === 'faux' ? 'checked' : ''}>
                                <div class="flex items-center justify-center w-6 h-6 border-2 border-gray-300 rounded-full mr-3 ${userAnswers[index] === 'faux' ? 'border-indigo-500 bg-indigo-500' : ''}">
                                    ${userAnswers[index] === 'faux' ? '<i class="fas fa-check text-white text-xs"></i>' : ''}
                                </div>
                                <span class="text-lg">Faux</span>
                            </label>
                        </div>
                    </div>
                `;
            } else if (question.type === 'multichoix') {
                questionHTML = `
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">${question.question}</h3>
                        <div class="space-y-3">
                            ${question.options.map((option, i) => `
                                <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors duration-150 ${userAnswers[index] === i ? 'border-indigo-500 bg-indigo-50' : ''}">
                                    <input type="radio" name="answer" value="${i}" class="hidden" ${userAnswers[index] === i ? 'checked' : ''}>
                                    <div class="flex items-center justify-center w-6 h-6 border-2 border-gray-300 rounded-full mr-3 ${userAnswers[index] === i ? 'border-indigo-500 bg-indigo-500' : ''}">
                                        ${userAnswers[index] === i ? '<i class="fas fa-check text-white text-xs"></i>' : ''}
                                    </div>
                                    <span class="text-lg">${option}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            questionContainer.innerHTML = questionHTML;

            // Add event listeners to answer options
            const answerOptions = questionContainer.querySelectorAll('label');
            answerOptions.forEach(option => {
                option.addEventListener('click', () => {
                    // Remove selection from all options
                    answerOptions.forEach(opt => {
                        opt.classList.remove('border-indigo-500', 'bg-indigo-50');
                        const radio = opt.querySelector('input[type="radio"]');
                        const checkIcon = opt.querySelector('.fa-check');
                        if (checkIcon) {
                            checkIcon.parentElement.classList.remove('border-indigo-500', 'bg-indigo-500');
                            checkIcon.remove();
                        }
                    });

                    // Select clicked option
                    option.classList.add('border-indigo-500', 'bg-indigo-50');
                    const radio = option.querySelector('input[type="radio"]');
                    radio.checked = true;
                    
                    const checkDiv = option.querySelector('div');
                    checkDiv.classList.add('border-indigo-500', 'bg-indigo-500');
                    checkDiv.innerHTML = '<i class="fas fa-check text-white text-xs"></i>';
                    
                    // Save answer
                    saveAnswer(index, radio.value);
                });
            });
        }

        // Save answer to localStorage
        function saveAnswer(index, answer) {
            userAnswers[index] = answer;
            localStorage.setItem('javaQuizAnswers', JSON.stringify(userAnswers));
            updateNavigationButtons();
        }

        // Update progress bar and text
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length}`;
        }

        // Update navigation buttons state
        function updateNavigationButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === quizQuestions.length - 1) {
                nextBtn.classList.add('hidden');
                resultsBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                resultsBtn.classList.add('hidden');
            }
        }

        // Show results
        function showResults() {
            let score = 0;
            resultsList.innerHTML = '';

            quizQuestions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                let isCorrect = false;
                
                if (question.type === 'vrai-faux') {
                    isCorrect = userAnswer === question.correctAnswer;
                } else if (question.type === 'multichoix') {
                    isCorrect = parseInt(userAnswer) === question.correctAnswer;
                }
                
                if (isCorrect) score++;
                
                const resultItem = document.createElement('div');
                resultItem.className = `p-4 rounded-lg border ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`;
                
                let userAnswerText = '';
                if (question.type === 'vrai-faux') {
                    userAnswerText = userAnswer || 'Non r√©pondu';
                } else if (question.type === 'multichoix') {
                    userAnswerText = userAnswer !== null ? question.options[userAnswer] : 'Non r√©pondu';
                }
                
                resultItem.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0 mt-1 mr-3">
                            <i class="fas ${isCorrect ? 'fa-check-circle text-green-500' : 'fa-times-circle text-red-500'}"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${question.question}</h4>
                            <div class="mt-2 grid grid-cols-1 md:grid-cols-2 gap-2">
                                <div class="${isCorrect ? 'text-green-700' : 'text-red-700'}">
                                    <span class="font-medium">Votre r√©ponse:</span>  ${!userAnswerText? "vous n'avez pas r√©pondu" : userAnswerText}
                                </div>
                                ${!isCorrect ? `
                                    <div class="text-green-700">
                                        <span class="font-medium">Bonne r√©ponse:</span> 
                                        ${question.type === 'vrai-faux' ? question.correctAnswer : question.options[question.correctAnswer]}
                                    </div>
                                ` : ''}
                            </div>
                            <div class="mt-2 text-gray-600 text-sm">
                                <i class="fas fa-info-circle mr-1"></i> ${question.explanation}
                            </div>
                        </div>
                    </div>
                `;
                
                resultsList.appendChild(resultItem);
            });
            
            scoreText.textContent = `Score: ${score}/${quizQuestions.length}`;
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');

            const scorePercentage = (score / quizQuestions.length) * 100;

            if (scorePercentage >= 50) {
              // Celebration effect
              confetti({
                particleCount: 200,
                spread: 100,
                origin: { y: 0.6 },
              });
            } else {
              // Failure effect
              resultsContainer.classList.add("shake");
            }
        }

        // Event Listeners
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
                updateProgress();
                updateNavigationButtons();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
                updateProgress();
                updateNavigationButtons();
            }
        });

        resultsBtn.addEventListener('click', showResults);

        restartBtn.addEventListener('click', () => {
            // Clear saved answers
            localStorage.removeItem('javaQuizAnswers');
            userAnswers = Array(quizQuestions.length).fill(null);
            currentQuestionIndex = 0;
            
            // Reset UI
            resultsContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            resultsContainer.classList.remove("shake"); // Remove shake effect on restart
            
            // Reinitialize quiz
            initQuiz();
        });

        downloadPdfBtn.addEventListener("click", () => {
            const { jsPDF } = window.jspdf;
            const resultsToCapture = document.getElementById("results-container");

            // Temporarily show the container to capture it, if it's hidden
            const wasHidden = resultsToCapture.classList.contains("hidden");
            if (wasHidden) {
                resultsToCapture.classList.remove("hidden");
            }

            html2canvas(resultsToCapture).then((canvas) => {
                if (wasHidden) {
                    resultsToCapture.classList.add("hidden");
                }
                const imgData = canvas.toDataURL("image/png");
                const pdf = new jsPDF("p", "mm", "a4");
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                pdf.addImage(imgData, "PNG", 0, 0, pdfWidth, pdfHeight);
                pdf.save("quiz-sql-results.pdf");
            });
        });
        // Initialize the quiz
        initQuiz();
    </script>
</body>
</html>